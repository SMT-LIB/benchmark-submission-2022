(set-info :smt-lib-version 2.6)
(set-logic AUFDTLIA)
(set-info :source |
Generated by: Federico Mora
Generated on: 2021-03-04
Generator: Uclid5.
Application: Experimental verification of distributed protocols
Target Solver: Z3
|)
(set-info :license "https://creativecommons.org/licenses/by/4.0/")
(set-info :category "industrial")
(set-info :status unknown)

(set-option :produce-assignments true)

(declare-datatypes ((AbstractServerMachine_ref_t 0)) (((s1)(s2))))
(declare-datatypes ((ClientMachine_ref_t 0)) (((c1)(c2))))
(declare-const default_server AbstractServerMachine_ref_t)
(declare-const default_client ClientMachine_ref_t)
(declare-datatypes ((eRequest_t 0)) (((eRequest_t
    (source ClientMachine_ref_t)
    (target AbstractServerMachine_ref_t)
    (id Int)))))
(declare-datatypes ((eResponse_t 0)) (((eResponse_t
    (source AbstractServerMachine_ref_t)
    (target ClientMachine_ref_t)
    (id Int)
    (success Bool)))))
(declare-datatypes ((eRequest_queue 0)) (((eRequest_queue
    (start Int)
    (end Int)
    (data (Array  Int eRequest_t))))))
(declare-datatypes ((eResponse_queue 0)) (((eResponse_queue
    (start Int)
    (end Int)
    (data (Array  Int eResponse_t))))))
(define-fun pop_request ((q eRequest_queue)) eRequest_queue
  (eRequest_queue
    ; assigning to start
    (+
      (start q)
      1)
    ; assigning to end
    (end q)
    ; assigning to data
    (data q)))
(define-fun peak_request ((q eRequest_queue)) eRequest_t
  (select
    (data q)
    (start q)))
(define-fun push_request ((q eRequest_queue) (r eRequest_t)) eRequest_queue
  (eRequest_queue
    ; assigning to start
    (start q)
    ; assigning to end
    (+
      (end q)
      1)
    ; assigning to data
    (store
      (data q)
      (end q)
      r)))

(declare-const defaultRequestArray (Array Int eRequest_t)) 
(assert (forall ((i Int)) (= (select defaultRequestArray i)
  (eRequest_t default_client default_server 0))))   

(define-fun init_requests () eRequest_queue
  (eRequest_queue
    ; assigning to start
    0
    ; assigning to end
    0
    ; assigning to data
    defaultRequestArray))
(define-fun is_empty_requests ((q eRequest_queue)) Bool
  (<=
    (end q)
    (start q)))
(define-fun requests_size ((q eRequest_queue)) Int
  (-
    (end q)
    (start q)))
(define-fun in_requests ((q eRequest_queue) (pos Int)) Bool
  (and
    (>=
      pos
      (start q))
    (<
      pos
      (end q))))
(define-fun get_request ((q eRequest_queue) (pos Int)) eRequest_t
  (select
    (data q)
    pos))
(define-fun pop_response ((q eResponse_queue)) eResponse_queue
  (eResponse_queue
    ; assigning to start
    (+
      (start q)
      1)
    ; assigning to end
    (end q)
    ; assigning to data
    (data q)))
(define-fun peak_response ((q eResponse_queue)) eResponse_t
  (select
    (data q)
    (start q)))
(define-fun push_response ((q eResponse_queue) (r eResponse_t)) eResponse_queue
  (eResponse_queue
    ; assigning to start
    (start q)
    ; assigning to end
    (+
      (end q)
      1)
    ; assigning to data
    (store
      (data q)
      (end q)
      r)))

(declare-const defaultResponseArray (Array Int eResponse_t)) 
(assert (forall ((i Int)) (= (select defaultResponseArray i)
  (eResponse_t default_server default_client 0 false)))) 

(define-fun init_responses () eResponse_queue
  (eResponse_queue
    ; assigning to start
    0
    ; assigning to end
    0
    ; assigning to data
    defaultResponseArray))

(define-fun is_empty_responses ((q eResponse_queue)) Bool
  (<=
    (end q)
    (start q)))
(define-fun responses_size ((q eResponse_queue)) Int
  (-
    (end q)
    (start q)))
(define-fun in_responses ((q eResponse_queue) (pos Int)) Bool
  (and
    (>=
      pos
      (start q))
    (<
      pos
      (end q))))
(define-fun get_response ((q eResponse_queue) (pos Int)) eResponse_t
  (select
    (data q)
    pos))
; declaring module AbstractServerMachine
  (declare-datatypes ((AbstractServerMachine 0)) (((AbstractServerMachine
    (eRequest_in eRequest_queue)
    (eResponse_out eResponse_queue)
    (success Bool)))))
  (define-fun line45col9!457 ((State AbstractServerMachine)) AbstractServerMachine
    (AbstractServerMachine
      ; assigning to eRequest_in
      (eRequest_in State)
      ; assigning to eResponse_out
      init_responses
      ; assigning to success
      (success State)))
  (define-fun line44col9!452 ((State AbstractServerMachine)) AbstractServerMachine
    (AbstractServerMachine
      ; assigning to eRequest_in
      init_requests
      ; assigning to eResponse_out
      (eResponse_out State)
      ; assigning to success
      (success State)))
  (define-fun AbstractServerMachine!init ((State AbstractServerMachine)) AbstractServerMachine
    (line45col9!457 (line44col9!452 State)))
  (define-fun line56col13!501 ((State AbstractServerMachine)) AbstractServerMachine
    (AbstractServerMachine
      ; assigning to eRequest_in
      (pop_request (eRequest_in State))
      ; assigning to eResponse_out
      (eResponse_out State)
      ; assigning to success
      (success State)))
  (define-fun line54col13!495 ((State AbstractServerMachine)) AbstractServerMachine
    (AbstractServerMachine
      ; assigning to eRequest_in
      (eRequest_in State)
      ; assigning to eResponse_out
      (push_response
        (eResponse_out State)
        (eResponse_t
          ; assigning to source
          (target (peak_request (eRequest_in State)))
          ; assigning to target
          (source (peak_request (eRequest_in State)))
          ; assigning to id
          (id (peak_request (eRequest_in State)))
          ; assigning to success
          (success State)))
      ; assigning to success
      (success State)))
  (define-fun line53col13!472 ((State AbstractServerMachine)) AbstractServerMachine
    State)
  (define-fun line51col19!3080 ((State AbstractServerMachine) (fresh!3 Bool)) AbstractServerMachine
    (AbstractServerMachine
      ; assigning to eRequest_in
      (eRequest_in State)
      ; assigning to eResponse_out
      (eResponse_out State)
      ; assigning to success
      fresh!3))
  (define-fun line50col46!503 ((State AbstractServerMachine) (fresh!3 Bool)) AbstractServerMachine
    (line56col13!501 (line54col13!495 (line53col13!472 (line51col19!3080
      State
      fresh!3)))))
  (define-fun line0col0!504 ((State AbstractServerMachine)) AbstractServerMachine
    State)
  (define-fun AbstractServerMachine!next ((State AbstractServerMachine) (fresh!3 Bool)) AbstractServerMachine
    (ite
      (not (is_empty_requests (eRequest_in State)))
      (line50col46!503
        State
        fresh!3)
      (line0col0!504 State)))
; done declaring module AbstractServerMachine

; declaring module ClientMachine
  (declare-datatypes ((ClientMachine 0)) (((ClientMachine
    (eResponse_in eResponse_queue)
    (eRequest_out eRequest_queue)
    (entry Bool)
    (server AbstractServerMachine_ref_t)
    (next_id Int)
    (last_id Int)
    (this ClientMachine_ref_t)
    (ghost_last_id Int)))))
  (define-fun line87col9!562 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      0))
  (define-fun line85col9!558 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      init_requests
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line84col9!553 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      init_responses
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line82col9!548 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      true
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line81col9!544 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      0
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line80col9!540 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      1
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun ClientMachine!init ((State ClientMachine)) ClientMachine
    (line87col9!562 (line85col9!558 (line84col9!553 (line82col9!548 (line81col9!544 (line80col9!540 State)))))))
  (define-fun line97col13!591 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      false
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line96col13!587 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (+
        (next_id State)
        1)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line95col13!580 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (push_request
        (eRequest_out State)
        (eRequest_t
          ; assigning to source
          (this State)
          ; assigning to target
          (server State)
          ; assigning to id
          (next_id State)))
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line93col20!593 ((State ClientMachine)) ClientMachine
    (line97col13!591 (line96col13!587 (line95col13!580 State))))
  (define-fun line102col17!617 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      true
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line101col17!613 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (pop_response (eResponse_in State))
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line100col17!607 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (id (peak_response (eResponse_in State)))
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (ghost_last_id State)))
  (define-fun line99col52!619 ((State ClientMachine)) ClientMachine
    (line102col17!617 (line101col17!613 (line100col17!607 State))))
  (define-fun line0col0!620 ((State ClientMachine)) ClientMachine
    State)
  (define-fun line99col13!621 ((State ClientMachine)) ClientMachine
    (ite
      (not (is_empty_responses (eResponse_in State)))
      (line99col52!619 State)
      (line0col0!620 State)))
  (define-fun line93col9!623 ((State ClientMachine)) ClientMachine
    (ite
      (entry State)
      (line93col20!593 State)
      (line99col13!621 State)))
  (define-fun line92col9!568 ((State ClientMachine)) ClientMachine
    (ClientMachine
      ; assigning to eResponse_in
      (eResponse_in State)
      ; assigning to eRequest_out
      (eRequest_out State)
      ; assigning to entry
      (entry State)
      ; assigning to server
      (server State)
      ; assigning to next_id
      (next_id State)
      ; assigning to last_id
      (last_id State)
      ; assigning to this
      (this State)
      ; assigning to ghost_last_id
      (last_id State)))
  (define-fun ClientMachine!next ((State ClientMachine)) ClientMachine
    (line93col9!623 (line92col9!568 State)))
; done declaring module ClientMachine

(declare-datatypes ((cases 0)) (((client_to_server)(server_to_client))))
; declaring module main
  (declare-datatypes ((main 0)) (((main
    (sinstances (Array  AbstractServerMachine_ref_t AbstractServerMachine))
    (cinstances (Array  ClientMachine_ref_t ClientMachine))
    (schoice AbstractServerMachine_ref_t)
    (cchoice ClientMachine_ref_t)
    (sstep Bool)
    (cstep Bool)
    (mediate Bool)
    (AbstractServerMachine_tmp AbstractServerMachine_ref_t)
    (ClientMachine_tmp ClientMachine_ref_t)
    (case_switch cases)))))
  (define-fun main!init ((State main)) main
    State)
  (define-fun line140col21!3364 ((State main)) main
    (main
      ; assigning to sinstances
      (store
        (sinstances State)
        (AbstractServerMachine_tmp State)
        (AbstractServerMachine
          ; assigning to eRequest_in
          (eRequest_in (select
            (sinstances State)
            (AbstractServerMachine_tmp State)))
          ; assigning to eResponse_out
          (pop_response (eResponse_out (select
            (sinstances State)
            (AbstractServerMachine_tmp State))))
          ; assigning to success
          (success (select
            (sinstances State)
            (AbstractServerMachine_tmp State)))))
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line138col21!3343 ((State main)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (store
        (cinstances State)
        (target (peak_response (eResponse_out (select
          (sinstances State)
          (AbstractServerMachine_tmp State)))))
        (ClientMachine
          ; assigning to eResponse_in
          (push_response
            (eResponse_in (select
              (cinstances State)
              (target (peak_response (eResponse_out (select
                (sinstances State)
                (AbstractServerMachine_tmp State)))))))
            (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))
          ; assigning to eRequest_out
          (eRequest_out (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))
          ; assigning to entry
          (entry (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))
          ; assigning to server
          (server (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))
          ; assigning to next_id
          (next_id (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))
          ; assigning to last_id
          (last_id (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))
          ; assigning to this
          (this (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))
          ; assigning to ghost_last_id
          (ghost_last_id (select
            (cinstances State)
            (target (peak_response (eResponse_out (select
              (sinstances State)
              (AbstractServerMachine_tmp State)))))))))
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line136col21!722 ((State main)) main
    State)
  (define-fun line135col21!707 ((State main)) main
    State)
  (define-fun line134col60!756 ((State main)) main
    (line140col21!3364 (line138col21!3343 (line136col21!722 (line135col21!707 State)))))
  (define-fun line0col0!757 ((State main)) main
    State)
  (define-fun line134col17!758 ((State main)) main
    (ite
      (not (is_empty_responses (eResponse_out (select
        (sinstances State)
        (AbstractServerMachine_tmp State)))))
      (line134col60!756 State)
      (line0col0!757 State)))
  (define-fun line133col17!697 ((State main)) main
    State)
  (define-fun line132col23!3307 ((State main) (fresh!10 AbstractServerMachine_ref_t)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      fresh!10
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line131col49!759 ((State main) (fresh!10 AbstractServerMachine_ref_t)) main
    (line134col17!758 (line133col17!697 (line132col23!3307
      State
      fresh!10))))
  (define-fun line152col21!3434 ((State main)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (store
        (cinstances State)
        (ClientMachine_tmp State)
        (ClientMachine
          ; assigning to eResponse_in
          (eResponse_in (select
            (cinstances State)
            (ClientMachine_tmp State)))
          ; assigning to eRequest_out
          (pop_request (eRequest_out (select
            (cinstances State)
            (ClientMachine_tmp State))))
          ; assigning to entry
          (entry (select
            (cinstances State)
            (ClientMachine_tmp State)))
          ; assigning to server
          (server (select
            (cinstances State)
            (ClientMachine_tmp State)))
          ; assigning to next_id
          (next_id (select
            (cinstances State)
            (ClientMachine_tmp State)))
          ; assigning to last_id
          (last_id (select
            (cinstances State)
            (ClientMachine_tmp State)))
          ; assigning to this
          (this (select
            (cinstances State)
            (ClientMachine_tmp State)))
          ; assigning to ghost_last_id
          (ghost_last_id (select
            (cinstances State)
            (ClientMachine_tmp State)))))
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line150col21!3398 ((State main)) main
    (main
      ; assigning to sinstances
      (store
        (sinstances State)
        (target (peak_request (eRequest_out (select
          (cinstances State)
          (ClientMachine_tmp State)))))
        (AbstractServerMachine
          ; assigning to eRequest_in
          (push_request
            (eRequest_in (select
              (sinstances State)
              (target (peak_request (eRequest_out (select
                (cinstances State)
                (ClientMachine_tmp State)))))))
            (peak_request (eRequest_out (select
              (cinstances State)
              (ClientMachine_tmp State)))))
          ; assigning to eResponse_out
          (eResponse_out (select
            (sinstances State)
            (target (peak_request (eRequest_out (select
              (cinstances State)
              (ClientMachine_tmp State)))))))
          ; assigning to success
          (success (select
            (sinstances State)
            (target (peak_request (eRequest_out (select
              (cinstances State)
              (ClientMachine_tmp State)))))))))
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line148col21!801 ((State main)) main
    State)
  (define-fun line147col21!786 ((State main)) main
    State)
  (define-fun line146col58!835 ((State main)) main
    (line152col21!3434 (line150col21!3398 (line148col21!801 (line147col21!786 State)))))
  (define-fun line0col0!836 ((State main)) main
    State)
  (define-fun line146col17!837 ((State main)) main
    (ite
      (not (is_empty_requests (eRequest_out (select
        (cinstances State)
        (ClientMachine_tmp State)))))
      (line146col58!835 State)
      (line0col0!836 State)))
  (define-fun line145col17!776 ((State main)) main
    State)
  (define-fun line144col23!3377 ((State main) (fresh!11 ClientMachine_ref_t)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      fresh!11
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line143col49!838 ((State main) (fresh!11 ClientMachine_ref_t)) main
    (line146col17!837 (line145col17!776 (line144col23!3377
      State
      fresh!11))))
  (define-fun line0col0!3297 ((State main)) main
    State)
  (define-fun line0col0!3300 ((State main) (fresh!11 ClientMachine_ref_t)) main
    (ite
      (=
        (case_switch State)
        client_to_server)
      (line143col49!838
        State
        fresh!11)
      (line0col0!3297 State)))
  (define-fun line0col0!3303 ((State main) (fresh!10 AbstractServerMachine_ref_t) (fresh!11 ClientMachine_ref_t)) main
    (ite
      (=
        (case_switch State)
        server_to_client)
      (line131col49!759
        State
        fresh!10)
      (line0col0!3300
        State
        fresh!11)))
  (define-fun line129col19!3287 ((State main) (fresh!9 cases)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      fresh!9))
  (define-fun line128col22!840 ((State main) (fresh!9 cases) (fresh!10 AbstractServerMachine_ref_t) (fresh!11 ClientMachine_ref_t)) main
    (line0col0!3303
      (line129col19!3287
        State
        fresh!9)
      fresh!10
      fresh!11))
  (define-fun line165col22!3512 ((State main) (fresh!3 Bool)) main
    (main
      ; assigning to sinstances
      (store
        (sinstances State)
        (schoice State)
        (AbstractServerMachine!next
          (select
            (sinstances State)
            (schoice State))
          fresh!3))
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line164col23!3498 ((State main) (fresh!15 AbstractServerMachine_ref_t)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      fresh!15
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line163col23!3485 ((State main) (fresh!14 Bool)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      fresh!14
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line162col24!866 ((State main) (fresh!14 Bool) (fresh!15 AbstractServerMachine_ref_t) (fresh!3 Bool)) main
    (line165col22!3512
      (line164col23!3498
        (line163col23!3485
          State
          fresh!14)
        fresh!15)
      fresh!3))
  (define-fun line0col0!867 ((State main)) main
    State)
  (define-fun line162col13!868 ((State main) (fresh!14 Bool) (fresh!15 AbstractServerMachine_ref_t) (fresh!3 Bool)) main
    (ite
      (sstep State)
      (line162col24!866
        State
        fresh!14
        fresh!15
        fresh!3)
      (line0col0!867 State)))
  (define-fun line160col22!3473 ((State main)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (store
        (cinstances State)
        (cchoice State)
        (ClientMachine!next (select
          (cinstances State)
          (cchoice State))))
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line159col23!3459 ((State main) (fresh!13 ClientMachine_ref_t)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      fresh!13
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line158col23!3446 ((State main) (fresh!12 Bool)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      fresh!12
      ; assigning to mediate
      (mediate State)
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun line157col24!852 ((State main) (fresh!12 Bool) (fresh!13 ClientMachine_ref_t)) main
    (line160col22!3473 (line159col23!3459
      (line158col23!3446
        State
        fresh!12)
      fresh!13)))
  (define-fun line0col0!853 ((State main)) main
    State)
  (define-fun line157col13!854 ((State main) (fresh!12 Bool) (fresh!13 ClientMachine_ref_t)) main
    (ite
      (cstep State)
      (line157col24!852
        State
        fresh!12
        fresh!13)
      (line0col0!853 State)))
  (define-fun line156col16!869 ((State main) (fresh!12 Bool) (fresh!13 ClientMachine_ref_t) (fresh!14 Bool) (fresh!15 AbstractServerMachine_ref_t) (fresh!3 Bool)) main
    (line162col13!868
      (line157col13!854
        State
        fresh!12
        fresh!13)
      fresh!14
      fresh!15
      fresh!3))
  (define-fun line128col9!870 ((State main) (fresh!9 cases) (fresh!10 AbstractServerMachine_ref_t) (fresh!11 ClientMachine_ref_t) (fresh!12 Bool) (fresh!13 ClientMachine_ref_t) (fresh!14 Bool) (fresh!15 AbstractServerMachine_ref_t) (fresh!3 Bool)) main
    (ite
      (mediate State)
      (line128col22!840
        State
        fresh!9
        fresh!10
        fresh!11)
      (line156col16!869
        State
        fresh!12
        fresh!13
        fresh!14
        fresh!15
        fresh!3)))
  (define-fun line127col15!3274 ((State main) (fresh!8 Bool)) main
    (main
      ; assigning to sinstances
      (sinstances State)
      ; assigning to cinstances
      (cinstances State)
      ; assigning to schoice
      (schoice State)
      ; assigning to cchoice
      (cchoice State)
      ; assigning to sstep
      (sstep State)
      ; assigning to cstep
      (cstep State)
      ; assigning to mediate
      fresh!8
      ; assigning to AbstractServerMachine_tmp
      (AbstractServerMachine_tmp State)
      ; assigning to ClientMachine_tmp
      (ClientMachine_tmp State)
      ; assigning to case_switch
      (case_switch State)))
  (define-fun main!next ((State main) (fresh!8 Bool) (fresh!9 cases) (fresh!10 AbstractServerMachine_ref_t) (fresh!11 ClientMachine_ref_t) (fresh!12 Bool) (fresh!13 ClientMachine_ref_t) (fresh!14 Bool) (fresh!15 AbstractServerMachine_ref_t) (fresh!3 Bool)) main
    (line128col9!870
      (line127col15!3274
        State
        fresh!8)
      fresh!9
      fresh!10
      fresh!11
      fresh!12
      fresh!13
      fresh!14
      fresh!15
      fresh!3))
  (define-fun main!spec ((State main)) Bool
    (and
      (and
        (=>
          (not (is_empty_responses (eResponse_in (select
            (cinstances State)
            c1))))
          (>
            (id (peak_response (eResponse_in (select
              (cinstances State)
              c1))))
            (ghost_last_id (select
              (cinstances State)
              c1))))
        (=>
          (not (is_empty_responses (eResponse_in (select
            (cinstances State)
            c2))))
          (>
            (id (peak_response (eResponse_in (select
              (cinstances State)
              c2))))
            (ghost_last_id (select
              (cinstances State)
              c2)))))
      (forall ((pos2 Int)) (and
        (=>
          (exists ((pos1 Int)) (and
            (in_responses
              (eResponse_out (select
                (sinstances State)
                (server (select
                  (cinstances State)
                  c1))))
              pos1)
            (=
              (target (get_response
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c1))))
                pos1))
              c1)))
          (and
            (=>
              (in_responses
                (eResponse_in (select
                  (cinstances State)
                  c1))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_in (select
                    (cinstances State)
                    c1))
                  pos2))
                c1)))
            (and
              (=>
                (in_requests
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos2))
                  c1)))
              (=>
                (in_requests
                  (eRequest_out (select
                    (cinstances State)
                    c1))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_out (select
                      (cinstances State)
                      c1))
                    pos2))
                  c1))))))
        (=>
          (exists ((pos1 Int)) (and
            (in_responses
              (eResponse_out (select
                (sinstances State)
                (server (select
                  (cinstances State)
                  c2))))
              pos1)
            (=
              (target (get_response
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c2))))
                pos1))
              c2)))
          (and
            (=>
              (in_responses
                (eResponse_in (select
                  (cinstances State)
                  c2))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_in (select
                    (cinstances State)
                    c2))
                  pos2))
                c2)))
            (and
              (=>
                (in_requests
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos2))
                  c2)))
              (=>
                (in_requests
                  (eRequest_out (select
                    (cinstances State)
                    c2))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_out (select
                      (cinstances State)
                      c2))
                    pos2))
                  c2))))))))
      (forall ((pos2 Int)) (and
        (=>
          (exists ((pos1 Int)) (and
            (in_responses
              (eResponse_in (select
                (cinstances State)
                c1))
              pos1)
            (=
              (target (get_response
                (eResponse_in (select
                  (cinstances State)
                  c1))
                pos1))
              c1)))
          (and
            (=>
              (in_responses
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c1))))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2))
                c1)))
            (and
              (=>
                (in_requests
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos2))
                  c1)))
              (=>
                (in_requests
                  (eRequest_out (select
                    (cinstances State)
                    c1))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_out (select
                      (cinstances State)
                      c1))
                    pos2))
                  c1))))))
        (=>
          (exists ((pos1 Int)) (and
            (in_responses
              (eResponse_in (select
                (cinstances State)
                c2))
              pos1)
            (=
              (target (get_response
                (eResponse_in (select
                  (cinstances State)
                  c2))
                pos1))
              c2)))
          (and
            (=>
              (in_responses
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c2))))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2))
                c2)))
            (and
              (=>
                (in_requests
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos2))
                  c2)))
              (=>
                (in_requests
                  (eRequest_out (select
                    (cinstances State)
                    c2))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_out (select
                      (cinstances State)
                      c2))
                    pos2))
                  c2))))))))
      (forall ((pos2 Int)) (and
        (=>
          (exists ((pos1 Int)) (and
            (in_requests
              (eRequest_in (select
                (sinstances State)
                (server (select
                  (cinstances State)
                  c1))))
              pos1)
            (=
              (source (get_request
                (eRequest_in (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c1))))
                pos1))
              c1)))
          (and
            (=>
              (in_responses
                (eResponse_in (select
                  (cinstances State)
                  c1))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_in (select
                    (cinstances State)
                    c1))
                  pos2))
                c1)))
            (and
              (=>
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2)
                (not (=
                  (target (get_response
                    (eResponse_out (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos2))
                  c1)))
              (=>
                (in_requests
                  (eRequest_out (select
                    (cinstances State)
                    c1))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_out (select
                      (cinstances State)
                      c1))
                    pos2))
                  c1))))))
        (=>
          (exists ((pos1 Int)) (and
            (in_requests
              (eRequest_in (select
                (sinstances State)
                (server (select
                  (cinstances State)
                  c2))))
              pos1)
            (=
              (source (get_request
                (eRequest_in (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c2))))
                pos1))
              c2)))
          (and
            (=>
              (in_responses
                (eResponse_in (select
                  (cinstances State)
                  c2))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_in (select
                    (cinstances State)
                    c2))
                  pos2))
                c2)))
            (and
              (=>
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2)
                (not (=
                  (target (get_response
                    (eResponse_out (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos2))
                  c2)))
              (=>
                (in_requests
                  (eRequest_out (select
                    (cinstances State)
                    c2))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_out (select
                      (cinstances State)
                      c2))
                    pos2))
                  c2))))))))
      (forall ((pos2 Int)) (and
        (=>
          (exists ((pos1 Int)) (and
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c1))
              pos1)
            (=
              (source (get_request
                (eRequest_out (select
                  (cinstances State)
                  c1))
                pos1))
              c1)))
          (and
            (=>
              (in_responses
                (eResponse_in (select
                  (cinstances State)
                  c1))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_in (select
                    (cinstances State)
                    c1))
                  pos2))
                c1)))
            (and
              (=>
                (in_requests
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos2))
                  c1)))
              (=>
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2)
                (not (=
                  (target (get_response
                    (eResponse_out (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos2))
                  c1))))))
        (=>
          (exists ((pos1 Int)) (and
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c2))
              pos1)
            (=
              (source (get_request
                (eRequest_out (select
                  (cinstances State)
                  c2))
                pos1))
              c2)))
          (and
            (=>
              (in_responses
                (eResponse_in (select
                  (cinstances State)
                  c2))
                pos2)
              (not (=
                (target (get_response
                  (eResponse_in (select
                    (cinstances State)
                    c2))
                  pos2))
                c2)))
            (and
              (=>
                (in_requests
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2)
                (not (=
                  (source (get_request
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos2))
                  c2)))
              (=>
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2)
                (not (=
                  (target (get_response
                    (eResponse_out (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos2))
                  c2))))))))
      (forall ((pos1 Int)(pos2 Int)) (and
        (and
          (=>
            (and
              (in_responses
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c1))))
                pos1)
              (and
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos2)
                (and
                  (=
                    (target (get_response
                      (eResponse_out (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c1))))
                      pos1))
                    c1)
                  (=
                    (target (get_response
                      (eResponse_out (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c1))))
                      pos2))
                    c1))))
            (=
              pos1
              pos2))
          (and
            (=>
              (and
                (in_responses
                  (eResponse_in (select
                    (cinstances State)
                    c1))
                  pos1)
                (and
                  (in_responses
                    (eResponse_in (select
                      (cinstances State)
                      c1))
                    pos2)
                  (and
                    (=
                      (target (get_response
                        (eResponse_in (select
                          (cinstances State)
                          c1))
                        pos1))
                      c1)
                    (=
                      (target (get_response
                        (eResponse_in (select
                          (cinstances State)
                          c1))
                        pos2))
                      c1))))
              (=
                pos1
                pos2))
            (and
              (=>
                (and
                  (in_requests
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos1)
                  (and
                    (in_requests
                      (eRequest_in (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c1))))
                      pos2)
                    (and
                      (=
                        (source (get_request
                          (eRequest_in (select
                            (sinstances State)
                            (server (select
                              (cinstances State)
                              c1))))
                          pos1))
                        c1)
                      (=
                        (source (get_request
                          (eRequest_in (select
                            (sinstances State)
                            (server (select
                              (cinstances State)
                              c1))))
                          pos2))
                        c1))))
                (=
                  pos1
                  pos2))
              (=>
                (and
                  (in_requests
                    (eRequest_out (select
                      (cinstances State)
                      c1))
                    pos1)
                  (and
                    (in_requests
                      (eRequest_out (select
                        (cinstances State)
                        c1))
                      pos2)
                    (and
                      (=
                        (source (get_request
                          (eRequest_out (select
                            (cinstances State)
                            c1))
                          pos1))
                        c1)
                      (=
                        (source (get_request
                          (eRequest_out (select
                            (cinstances State)
                            c1))
                          pos2))
                        c1))))
                (=
                  pos1
                  pos2)))))
        (and
          (=>
            (and
              (in_responses
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c2))))
                pos1)
              (and
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos2)
                (and
                  (=
                    (target (get_response
                      (eResponse_out (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c2))))
                      pos1))
                    c2)
                  (=
                    (target (get_response
                      (eResponse_out (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c2))))
                      pos2))
                    c2))))
            (=
              pos1
              pos2))
          (and
            (=>
              (and
                (in_responses
                  (eResponse_in (select
                    (cinstances State)
                    c2))
                  pos1)
                (and
                  (in_responses
                    (eResponse_in (select
                      (cinstances State)
                      c2))
                    pos2)
                  (and
                    (=
                      (target (get_response
                        (eResponse_in (select
                          (cinstances State)
                          c2))
                        pos1))
                      c2)
                    (=
                      (target (get_response
                        (eResponse_in (select
                          (cinstances State)
                          c2))
                        pos2))
                      c2))))
              (=
                pos1
                pos2))
            (and
              (=>
                (and
                  (in_requests
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos1)
                  (and
                    (in_requests
                      (eRequest_in (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c2))))
                      pos2)
                    (and
                      (=
                        (source (get_request
                          (eRequest_in (select
                            (sinstances State)
                            (server (select
                              (cinstances State)
                              c2))))
                          pos1))
                        c2)
                      (=
                        (source (get_request
                          (eRequest_in (select
                            (sinstances State)
                            (server (select
                              (cinstances State)
                              c2))))
                          pos2))
                        c2))))
                (=
                  pos1
                  pos2))
              (=>
                (and
                  (in_requests
                    (eRequest_out (select
                      (cinstances State)
                      c2))
                    pos1)
                  (and
                    (in_requests
                      (eRequest_out (select
                        (cinstances State)
                        c2))
                      pos2)
                    (and
                      (=
                        (source (get_request
                          (eRequest_out (select
                            (cinstances State)
                            c2))
                          pos1))
                        c2)
                      (=
                        (source (get_request
                          (eRequest_out (select
                            (cinstances State)
                            c2))
                          pos2))
                        c2))))
                (=
                  pos1
                  pos2)))))))
      (forall ((pos Int)) (and
        (=>
          (entry (select
            (cinstances State)
            c1))
          (and
            (=>
              (in_responses
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c1))))
                pos)
              (not (=
                (target (get_response
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos))
                c1)))
            (and
              (=>
                (in_responses
                  (eResponse_in (select
                    (cinstances State)
                    c1))
                  pos)
                (not (=
                  (target (get_response
                    (eResponse_in (select
                      (cinstances State)
                      c1))
                    pos))
                  c1)))
              (and
                (=>
                  (in_requests
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos)
                  (not (=
                    (source (get_request
                      (eRequest_in (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c1))))
                      pos))
                    c1)))
                (=>
                  (in_requests
                    (eRequest_out (select
                      (cinstances State)
                      c1))
                    pos)
                  (not (=
                    (source (get_request
                      (eRequest_out (select
                        (cinstances State)
                        c1))
                      pos))
                    c1)))))))
        (=>
          (entry (select
            (cinstances State)
            c2))
          (and
            (=>
              (in_responses
                (eResponse_out (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c2))))
                pos)
              (not (=
                (target (get_response
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos))
                c2)))
            (and
              (=>
                (in_responses
                  (eResponse_in (select
                    (cinstances State)
                    c2))
                  pos)
                (not (=
                  (target (get_response
                    (eResponse_in (select
                      (cinstances State)
                      c2))
                    pos))
                  c2)))
              (and
                (=>
                  (in_requests
                    (eRequest_in (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos)
                  (not (=
                    (source (get_request
                      (eRequest_in (select
                        (sinstances State)
                        (server (select
                          (cinstances State)
                          c2))))
                      pos))
                    c2)))
                (=>
                  (in_requests
                    (eRequest_out (select
                      (cinstances State)
                      c2))
                    pos)
                  (not (=
                    (source (get_request
                      (eRequest_out (select
                        (cinstances State)
                        c2))
                      pos))
                    c2)))))))))
      (forall ((pos Int)) (and
        (and
          (=>
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c1))
              pos)
            (=
              (id (get_request
                (eRequest_out (select
                  (cinstances State)
                  c1))
                pos))
              (-
                (next_id (select
                  (cinstances State)
                  c1))
                1)))
          (and
            (=>
              (in_requests
                (eRequest_in (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c1))))
                pos)
              (=
                (id (get_request
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos))
                (-
                  (next_id (select
                    (cinstances State)
                    c1))
                  1)))
            (and
              (=>
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c1))))
                  pos)
                (=
                  (id (get_response
                    (eResponse_out (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c1))))
                    pos))
                  (-
                    (next_id (select
                      (cinstances State)
                      c1))
                    1)))
              (=>
                (in_responses
                  (eResponse_in (select
                    (cinstances State)
                    c1))
                  pos)
                (=
                  (id (get_response
                    (eResponse_in (select
                      (cinstances State)
                      c1))
                    pos))
                  (-
                    (next_id (select
                      (cinstances State)
                      c1))
                    1))))))
        (and
          (=>
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c2))
              pos)
            (=
              (id (get_request
                (eRequest_out (select
                  (cinstances State)
                  c2))
                pos))
              (-
                (next_id (select
                  (cinstances State)
                  c2))
                1)))
          (and
            (=>
              (in_requests
                (eRequest_in (select
                  (sinstances State)
                  (server (select
                    (cinstances State)
                    c2))))
                pos)
              (=
                (id (get_request
                  (eRequest_in (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos))
                (-
                  (next_id (select
                    (cinstances State)
                    c2))
                  1)))
            (and
              (=>
                (in_responses
                  (eResponse_out (select
                    (sinstances State)
                    (server (select
                      (cinstances State)
                      c2))))
                  pos)
                (=
                  (id (get_response
                    (eResponse_out (select
                      (sinstances State)
                      (server (select
                        (cinstances State)
                        c2))))
                    pos))
                  (-
                    (next_id (select
                      (cinstances State)
                      c2))
                    1)))
              (=>
                (in_responses
                  (eResponse_in (select
                    (cinstances State)
                    c2))
                  pos)
                (=
                  (id (get_response
                    (eResponse_in (select
                      (cinstances State)
                      c2))
                    pos))
                  (-
                    (next_id (select
                      (cinstances State)
                      c2))
                    1))))))))
      (and
        (or
          (>
            (-
              (next_id (select
                (cinstances State)
                c1))
              (last_id (select
                (cinstances State)
                c1)))
            1)
          (and
            (entry (select
              (cinstances State)
              c1))
            (=
              (-
                (next_id (select
                  (cinstances State)
                  c1))
                (last_id (select
                  (cinstances State)
                  c1)))
              1)))
        (or
          (>
            (-
              (next_id (select
                (cinstances State)
                c2))
              (last_id (select
                (cinstances State)
                c2)))
            1)
          (and
            (entry (select
              (cinstances State)
              c2))
            (=
              (-
                (next_id (select
                  (cinstances State)
                  c2))
                (last_id (select
                  (cinstances State)
                  c2)))
              1))))
      (and
        (>=
          (last_id (select
            (cinstances State)
            c1))
          (ghost_last_id (select
            (cinstances State)
            c1)))
        (>=
          (last_id (select
            (cinstances State)
            c2))
          (ghost_last_id (select
            (cinstances State)
            c2))))
      (forall ((pos Int)) (and
        (and
          (=>
            (in_responses
              (eResponse_out (select
                (sinstances State)
                s1))
              pos)
            (=
              (server (select
                (cinstances State)
                (target (get_response
                  (eResponse_out (select
                    (sinstances State)
                    s1))
                  pos))))
              s1))
          (=>
            (in_requests
              (eRequest_in (select
                (sinstances State)
                s1))
              pos)
            (=
              (server (select
                (cinstances State)
                (source (get_request
                  (eRequest_in (select
                    (sinstances State)
                    s1))
                  pos))))
              s1)))
        (and
          (=>
            (in_responses
              (eResponse_out (select
                (sinstances State)
                s2))
              pos)
            (=
              (server (select
                (cinstances State)
                (target (get_response
                  (eResponse_out (select
                    (sinstances State)
                    s2))
                  pos))))
              s2))
          (=>
            (in_requests
              (eRequest_in (select
                (sinstances State)
                s2))
              pos)
            (=
              (server (select
                (cinstances State)
                (source (get_request
                  (eRequest_in (select
                    (sinstances State)
                    s2))
                  pos))))
              s2)))))
      (forall ((pos Int)) (and
        (and
          (=>
            (in_responses
              (eResponse_in (select
                (cinstances State)
                c1))
              pos)
            (=
              (source (get_response
                (eResponse_in (select
                  (cinstances State)
                  c1))
                pos))
              (server (select
                (cinstances State)
                c1))))
          (=>
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c1))
              pos)
            (=
              (target (get_request
                (eRequest_out (select
                  (cinstances State)
                  c1))
                pos))
              (server (select
                (cinstances State)
                c1)))))
        (and
          (=>
            (in_responses
              (eResponse_in (select
                (cinstances State)
                c2))
              pos)
            (=
              (source (get_response
                (eResponse_in (select
                  (cinstances State)
                  c2))
                pos))
              (server (select
                (cinstances State)
                c2))))
          (=>
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c2))
              pos)
            (=
              (target (get_request
                (eRequest_out (select
                  (cinstances State)
                  c2))
                pos))
              (server (select
                (cinstances State)
                c2)))))))
      (forall ((pos Int)) (and
        (and
          (=>
            (in_responses
              (eResponse_out (select
                (sinstances State)
                s1))
              pos)
            (=
              (source (get_response
                (eResponse_out (select
                  (sinstances State)
                  s1))
                pos))
              s1))
          (=>
            (in_requests
              (eRequest_in (select
                (sinstances State)
                s1))
              pos)
            (=
              (target (get_request
                (eRequest_in (select
                  (sinstances State)
                  s1))
                pos))
              s1)))
        (and
          (=>
            (in_responses
              (eResponse_out (select
                (sinstances State)
                s2))
              pos)
            (=
              (source (get_response
                (eResponse_out (select
                  (sinstances State)
                  s2))
                pos))
              s2))
          (=>
            (in_requests
              (eRequest_in (select
                (sinstances State)
                s2))
              pos)
            (=
              (target (get_request
                (eRequest_in (select
                  (sinstances State)
                  s2))
                pos))
              s2)))))
      (forall ((pos Int)) (and
        (and
          (=>
            (in_responses
              (eResponse_in (select
                (cinstances State)
                c1))
              pos)
            (=
              (target (get_response
                (eResponse_in (select
                  (cinstances State)
                  c1))
                pos))
              c1))
          (=>
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c1))
              pos)
            (=
              (source (get_request
                (eRequest_out (select
                  (cinstances State)
                  c1))
                pos))
              c1)))
        (and
          (=>
            (in_responses
              (eResponse_in (select
                (cinstances State)
                c2))
              pos)
            (=
              (target (get_response
                (eResponse_in (select
                  (cinstances State)
                  c2))
                pos))
              c2))
          (=>
            (in_requests
              (eRequest_out (select
                (cinstances State)
                c2))
              pos)
            (=
              (source (get_request
                (eRequest_out (select
                  (cinstances State)
                  c2))
                pos))
              c2)))))))
; done declaring module main

(declare-const fresh!16 main)
(declare-const fresh!17 main)
(declare-const fresh!8!step!1 Bool)
(declare-const fresh!9!step!1 cases)
(declare-const fresh!10!step!1 AbstractServerMachine_ref_t)
(declare-const fresh!11!step!1 ClientMachine_ref_t)
(declare-const fresh!12!step!1 Bool)
(declare-const fresh!13!step!1 ClientMachine_ref_t)
(declare-const fresh!14!step!1 Bool)
(declare-const fresh!15!step!1 AbstractServerMachine_ref_t)
(declare-const fresh!3!step!1 Bool)
(assert (and
  (and
    (and
      (=
        (this (select
          (cinstances fresh!16)
          c1))
        c1)
      (=
        (this (select
          (cinstances fresh!16)
          c2))
        c2))
    (and
      (and
        (and
          (>=
            (responses_size (eResponse_out (select
              (sinstances fresh!16)
              s1)))
            0)
          (and
            (>=
              (responses_size (eResponse_in (select
                (cinstances fresh!16)
                c1)))
              0)
            (and
              (>=
                (requests_size (eRequest_in (select
                  (sinstances fresh!16)
                  s1)))
                0)
              (>=
                (requests_size (eRequest_out (select
                  (cinstances fresh!16)
                  c1)))
                0))))
        (and
          (>=
            (responses_size (eResponse_out (select
              (sinstances fresh!16)
              s1)))
            0)
          (and
            (>=
              (responses_size (eResponse_in (select
                (cinstances fresh!16)
                c2)))
              0)
            (and
              (>=
                (requests_size (eRequest_in (select
                  (sinstances fresh!16)
                  s1)))
                0)
              (>=
                (requests_size (eRequest_out (select
                  (cinstances fresh!16)
                  c2)))
                0)))))
      (and
        (and
          (>=
            (responses_size (eResponse_out (select
              (sinstances fresh!16)
              s2)))
            0)
          (and
            (>=
              (responses_size (eResponse_in (select
                (cinstances fresh!16)
                c1)))
              0)
            (and
              (>=
                (requests_size (eRequest_in (select
                  (sinstances fresh!16)
                  s2)))
                0)
              (>=
                (requests_size (eRequest_out (select
                  (cinstances fresh!16)
                  c1)))
                0))))
        (and
          (>=
            (responses_size (eResponse_out (select
              (sinstances fresh!16)
              s2)))
            0)
          (and
            (>=
              (responses_size (eResponse_in (select
                (cinstances fresh!16)
                c2)))
              0)
            (and
              (>=
                (requests_size (eRequest_in (select
                  (sinstances fresh!16)
                  s2)))
                0)
              (>=
                (requests_size (eRequest_out (select
                  (cinstances fresh!16)
                  c2)))
                0))))))
    (and
      (=
        (select
          (sinstances fresh!16)
          s1)
        (AbstractServerMachine!init (select
          (sinstances fresh!16)
          s1)))
      (=
        (select
          (sinstances fresh!16)
          s2)
        (AbstractServerMachine!init (select
          (sinstances fresh!16)
          s2))))
    (and
      (=
        (select
          (cinstances fresh!16)
          c1)
        (ClientMachine!init (select
          (cinstances fresh!16)
          c1)))
      (=
        (select
          (cinstances fresh!16)
          c2)
        (ClientMachine!init (select
          (cinstances fresh!16)
          c2)))))
  (or
    (not (main!spec (main!init fresh!16)))
    (and
      (main!spec fresh!17)
      (not (main!spec (main!next
        fresh!17
        fresh!8!step!1
        fresh!9!step!1
        fresh!10!step!1
        fresh!11!step!1
        fresh!12!step!1
        fresh!13!step!1
        fresh!14!step!1
        fresh!15!step!1
        fresh!3!step!1)))))))


(check-sat)
(echo "")
(echo "Proof Status")
(get-assignment)
(echo "")
(exit)